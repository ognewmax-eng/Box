# Возможные улучшения и варианты развития проекта

Документ описывает направления развития Box Party Game после текущих исправлений и стабилизации.

---

## 1. Надёжность и инфраструктура

- **Reconnect игрока** — при обрыве связи восстанавливать сессию по сохранённому в localStorage `roomCode` + идентификатор игрока; на сервере — хранение/восстановление состояния комнаты при переподключении.
- **Лимиты** — максимальное число игроков в комнате (например, 8–12), максимальное число комнат на процесс (защита от исчерпания памяти).
- **Таймаут неактивных комнат** — автоматически удалять комнаты, в которых давно не было активности (например, 1–2 часа).
- **Валидация размера пака** — ограничить размер тела запроса в `POST /api/packs` (например, `express.json({ limit: '1mb' })` или проверка длины), чтобы избежать DoS при загрузке огромных JSON.
- **Логирование и мониторинг** — структурированные логи (события комнат, ошибки), опционально метрики (число комнат, игроков, ошибок) для отладки и эксплуатации.

---

## 2. Безопасность

- **Авторизация админки** — простая аутентификация (API-ключ, Basic Auth или отдельный логин) для маршрутов создания/редактирования паков, особенно при доступе по сети.
- **Ограничение CORS** — в продакшене задать конкретный `origin` вместо `*` для Socket.IO и Express.
- **Rate limiting** — ограничение частоты запросов к API и подключений по сокетам с одного IP, чтобы снизить риск флуда и брутфорса кода комнаты.

---

## 3. Игровой процесс и контент

- **Новые типы вопросов** — «правда/ложь», «расставить по порядку», «оценка по шкале», «рисование» (canvas на клиенте + передача изображения).
- **Подсказки и помощь** — 50/50, подсказка за очки, «звонок другу» (если появятся зрители).
- **Звуки и музыка** — фоновые треки для раундов, отдельные звуки для правильного/неправильного ответа, настраиваемые в админке или в настройках игры.
- **Темы и кастомизация** — смена цветовой темы (Nexus / светлая / контрастная), опционально кастомные логотип и название для организаторов.

---

## 4. UX и интерфейс

- **Адаптив и PWA** — доработка вёрстки под маленькие экраны, возможность установки клиента как PWA для удобного входа по QR без браузера.
- **Локализация (i18n)** — вынос строк в словари (русский/английский и при необходимости другие языки) для использования в одной сборке в разных регионах.
- **Обратная связь при ошибках** — понятные сообщения при ошибке входа (комната не найдена, имя занято, сеть недоступна), подсказки по повторной попытке.
- **Экран загрузки и скелетоны** — индикация загрузки пака, списка паков, списка игроков вместо «пустого» экрана.

---

## 5. Разработка и качество кода

- **Расширение тестов** — тесты для страниц Host и Admin, тесты сокет-событий (мок io), интеграционные тесты критичных сценариев (создание комнаты → вход → вопрос → ответы → результаты).
- **Единый источник констант** — общий модуль констант для клиента и сервера (например, общий пакет или копирование при сборке), чтобы не расходились имена событий и лимиты.
- **Типизация** — постепенный переход на TypeScript на клиенте и/или сервере для меньшего числа ошибок и лучшей поддержки в IDE.
- **Линтеры и форматтеры** — ESLint + Prettier с общими правилами для всего репозитория.

---

## 6. Развёртывание и распространение

- **Docker** — образ для сервера (Node + статика клиента) и пример `docker-compose` для быстрого запуска на своём сервере или в облаке.
- **Документация** — краткий README по установке, настройке (порт, CORS, опционально env для API-ключа), созданию паков и запуску игры для ведущего и игроков.
- **Обновления** — механизм уведомления о новой версии (например, проверка версии при загрузке клиента и баннер «Доступна новая версия»).

---

## 7. Дополнительные сценарии использования

- **Режим зрителя** — только просмотр вопросов и результатов без участия в подсчёте очков (стримы, большие мероприятия).
- **Командная игра** — объединение игроков в команды, общий счёт команды и отдельная таблица лидеров по командам.
- **Кастомные правила раундов** — удвоение очков за раунд, «огонь» (серия правильных ответов), бонус за скорость (больше очков при быстром ответе).
- **Экспорт результатов** — выгрузка итоговой таблицы (CSV/JSON) или отправка на почту для организаторов мероприятий.

---

## 8. Приоритизация

| Приоритет | Направление | Зачем |
|-----------|-------------|--------|
| Высокий   | Reconnect, лимиты игроков/комнат, таймаут комнат | Стабильность и предсказуемость в продакшене |
| Высокий   | Авторизация админки, CORS, rate limiting | Безопасность при доступе по сети |
| Средний   | Звуки, PWA, расширение тестов | Удобство и поддержка кода |
| Средний   | Новые типы вопросов, локализация | Расширение аудитории и сценариев |
| Низкий    | Режим зрителя, команды, экспорт результатов | Дополнительные фичи для продвинутых сценариев |

Файл можно дополнять по мере реализации пунктов или появления новых идей.
